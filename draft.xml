<?xml version="1.0" encoding="US-ASCII"?>
<!-- This template is for creating an Internet Draft using xml2rfc,
     which is available here: http://xml.resource.org. -->
<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
<!-- One method to get references from the online citation libraries.
     There has to be one entity for each item to be referenced.
     An alternate method (rfc include) is described in the references. -->

<!ENTITY RFC1122 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.1122.xml">
<!ENTITY RFC1918 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.1918.xml">
<!ENTITY RFC2119 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml">
<!ENTITY RFC3493 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3493.xml">
<!ENTITY RFC3879 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3879.xml">
<!ENTITY RFC4191 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4191.xml">
<!ENTITY RFC4861 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4861.xml">
<!ENTITY RFC4862 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4862.xml">
<!ENTITY RFC6418 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.6418.xml">
<!ENTITY RFC7559 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.7559.xml">
<!ENTITY RFC7934 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.7934.xml">
]>
<?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>
<!-- used by XSLT processors -->
<!-- For a complete list and description of processing instructions (PIs),
     please see http://xml.resource.org/authoring/README.html. -->
<!-- Below are generally applicable Processing Instructions (PIs) that most I-Ds might want to use.
     (Here they are set differently than their defaults in xml2rfc v1.32) -->
<?rfc strict="yes" ?>
<!-- give errors regarding ID-nits and DTD validation -->
<!-- control the table of contents (ToC) -->
<?rfc toc="yes"?>
<!-- generate a ToC -->
<?rfc tocdepth="4"?>
<!-- the number of levels of subsections in ToC. default: 3 -->
<!-- control references -->
<?rfc symrefs="yes"?>
<!-- use symbolic references tags, i.e, [RFC2119] instead of [1] -->
<?rfc sortrefs="yes" ?>
<!-- sort the reference entries alphabetically -->
<!-- control vertical white space
     (using these PIs as follows is recommended by the RFC Editor) -->
<?rfc compact="yes" ?>
<!-- do not start each main section on a new page -->
<?rfc subcompact="no" ?>
<!-- keep one blank line between list items -->
<!-- end of list of popular I-D processing instructions -->
<rfc category="exp"
     ipr="trust200902"
     updates="4861"
     docName="draft-kline-6man-pio-exclusive-bit-pre00">

  <!-- category values: std, bcp, info, exp, and historic
     ipr values: full3667, noModification3667, noDerivatives3667
     you can add the attributes updates="NNNN" and obsoletes="NNNN"
     they will automatically be output with "(if approved)" -->


  <front>
    <title abbrev="Prefix Information Option Exclusive Bit"
      >IPv6 Router Advertisement Prefix Information Option Exclusive Bit</title>

    <author fullname="Erik Kline"
            initials="E." surname="Kline">
      <organization>Google Japan KK</organization>
      <address>
        <postal>
          <street>6-10-1 Roppongi</street>
          <street>Mori Tower, 44th floor</street>
          <city>Minato</city>
          <region>Tokyo</region>
          <code>106-6126</code>
          <country>JP</country>
        </postal>
        <phone></phone>
        <email>ek@google.com</email>
      </address>
    </author>

    <author fullname="Mikael Abrahamsson"
            initials="M." surname="Abrahamsson">
      <organization>T-Systems Nordic</organization>
      <address>
        <postal>
          <street>Kistagangen 26</street>
          <city>Stockholm</city>
          <country>SE</country>
        </postal>
        <email>Mikael.Abrahamsson@t-systems.se</email>
      </address>
    </author>

    <date/>

    <!-- Meta-data Declarations -->

    <area>General</area>

    <workgroup>Internet Engineering Task Force</workgroup>

    <!-- WG name at the upperleft corner of the doc,
         IETF is fine for individual submissions.
	 If this element is not present, the default is "Network Working Group",
         which is used by the RFC Editor as a nod to the history of the IETF. -->

    <keyword>ipv6</keyword>
    <keyword>6man</keyword>
    <keyword>router</keyword>
    <keyword>advertisement</keyword>
    <keyword>prefix</keyword>
    <keyword>information</keyword>
    <keyword>option</keyword>
    <keyword>exclusive</keyword>

    <abstract>
      <t>
This document defines a new control bit in the IPv6 RA PIO flags octet
that indicates that the node receiving this RA is the exclusive receiver of
all traffic destined to any address with that prefix.
      </t>
      <t>
Termed the eXclusive bit (or "X bit"), nodes that recognize this can perform
some traffic-saving optimizations (e.g. disable ND and DAD for addresses
within this prefix) and more easily make creative use of its address space
(vis a vis 7934 or even 64share).
      </t>
      <t>
Use of the X bit is backward compatible with existing compliant
implementations.
      </t>
    </abstract>
  </front>


  <middle>
    <section title="Introduction">
      <t>
This document defines a new control bit in the Internet Protocol version 6
(IPv6) Router Advertisement (RA) Prefix Information Option (PIO) flags octet
that indicates that the node receiving this RA is the exclusive receiver of
all traffic destined to any address with that prefix. Subject to the lifetime
constraints within the PIO, the receiving node effectively has exclusive
use of the prefix, and will be the next hop destination for the sending router,
and possibly other routers, for all traffic destined toward the prefix.
      </t>
      <t>
Termed the eXclusive bit (or "X bit"), nodes that recognize this can perform
some traffic-saving optimizations (e.g. disable Neighbor Discovery (ND) and
Duplicate Address Detection (DAD) for addresses within this prefix) and more
easily make creative use of its address space (vis a vis 7934).
      </t>
      <t>
Use of the X bit is backward compatible with existing compliant
implementations. RFC 4861 compliant nodes that do not understand the X bit
are not negatively impacted.  They must ignore it, and can process the PIO
under existing standards, making use of the information exactly as if the
X bit were not set.
      </t>
    </section>

    <section anchor="motivation" title="Motivation">
      <t>
There are several initiatives that propose network side practices that provide
customer isolation and to enhance scalability, power efficiency, security and
other factors in networks. Some of these involve isolating a host so that the
host is the only one in the L3 subnet (prefix).
      </t>

      <t>
(list drafts/RFCs here)
      </t>

      <t>
This document proposes an additional bit in the IPv6 Prefix Information Option
(PIO) that tells the host that it's the only host in this prefix, and that it
thus doesn't need to perform ND (Neighbour Discovery) and DAD
(Duplicate Address Detection)
      </t>
      <t>
        <list style="symbols">
<t></t>
<t></t>
<t></t>
<t></t>
<t></t>
        </list>
      </t>
      <t>
      </t>
      <t>
      </t>

      <section title="Requirements Language">
        <t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
        "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
        document are to be interpreted as described in <xref
        target="RFC2119">RFC 2119</xref>.</t>
      </section>

      <section title="Terminology">
        <t>
Throughout this document the following terminology is used purely for the
sake of brevity.
        </t>

        <section title="PIO-X">
          <t>
The term "PIO-X" is used to refer to a Prefix Information Option (PIO)
that has the X bit set.
          </t>
        </section>

        <section title="PIO-X RA">
          <t>
The phrase "PIO-X RA" is used to refer to an RA that contains one or more
PIO-X entries (the same RA may also contain one or more PIOs without the
X bit set).
          </t>
        </section>

        <section title="Host">
          <t>
The term "host" may be used interchangably throughout this document to mean
a node receiving an RA. No behaviour restrictions traditionally associated
with distinctions between host and router are placed on nodes receiving any
PIO-X RA.
          </t>
        </section>
      </section>
    </section>

    <section title="Updated Prefix Information Option">
      <t>
This document updates the Prefix Information Option specification in
RFC 4861, section 4.6.2 with the specification of new bit from the
former Reserved1 field as follows.
      </t>

      <section title="Updated format description">
        <figure align="center">
          <artwork align="left"><![CDATA[
       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |     Type      |    Length     | Prefix Length |L|A|X|  Rsrvd1 |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                         Valid Lifetime                        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                       Preferred Lifetime                      |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                           Reserved2                           |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                                                               |
      +                                                               +
      |                                                               |
      +                            Prefix                             +
      |                                                               |
      +                                                               +
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                                ]]>
          </artwork>
        </figure>

        <texttable align="left" style="none">
          <preamble>Fields:</preamble>
          <ttcol></ttcol>
          <ttcol></ttcol>
          <ttcol></ttcol>
          <c>&nbsp;</c>
          <c>X</c>
          <c>
The eXclusive ownership indicator flag, defined by this document. When set,
the receiving node can be assured that all traffic destined to any address
within the specified Prefix will forwarded to itself by, at a minimum, the
router from which the encapsulating RA was received, but possibly other
routers as well.

When not set, the receiving node MUST NOT make any assumptions of exclusive
use of the specified Prefix, i.e. processing is unchanged from previous
standards behvaiour.
          </c>

          <c>&nbsp;</c><c>&nbsp;</c><c>&nbsp;</c>

          <c>&nbsp;</c>
          <c>Rsrvd1</c>
          <c>
Retains the same meaning as Reserved1 from rfc4861#section-4.6.2.
          </c>

          <c>&nbsp;</c><c>&nbsp;</c><c>&nbsp;</c>

          <c>&nbsp;</c>
          <c>All other fields</c>
          <c>Retain their same meaning rfc4861#section-4.6.2.</c>
        </texttable>
      </section>
      <section anchor="pio-x_processing" title="Processing">
<t>
Nodes compliant with this specification, i.e. those that understand the X bit,
MUST ignore the actual values of the L and A bits and instead intepret them
as follows:
</t>

<t>
<list style="symbols">
  <t>interpret the L bit as if it were 0 (L=0)</t>
  <t>interpret the A bit as it it were 1 (A=1)</t>
</list>
The rationale for this is discussed further in <xref target="host_behaviour"/>.
</t>

<t>
It is RECOMMENDED that RAs containing a PIO with the X bit set also explicitly
configure the PIO flags L=0 and A=1, for backward compatibility
(use by non X-bit aware nodes).
</t>
      </section>
    </section>

    <section anchor="host_behaviour" title="Host behaviour">
      <section title="PIO-X processing">
        <t>
A receiving node compliant with this document processes a PIO entry with
the X bit set following the requirements in previous standards documents
(chiefly rfc4861#section-6.3.4) with one key difference: the actual values
of the L bit and the A bit are ignored. Instead, the receiving node MUST
interpret the L and A bits according to <xref target="pio-x_processing"/>.
        </t>

        <section title="L bit">
          <t>
Because a PIO-X aware node will know that it has exclusive use of a prefix
with non-zero valid lifetime, the prefix itself cannot be considered to be
on-link with respect to the link on which the PIO-X RA was received.
          </t>
          <t>
Note that a given address from within the prefix may be considered on-link
according to the definition in rfc5942#section-4, item 1, should the
receiving node chose to configure that address on said link, but this is in
no way synonymous with the entire prefix being considered on-link.
          </t>
        </section>

        <section title="A bit">
          <t>
Because a PIO-X aware node will know that it has exclusive use of a prefix
with non-zero valid lifetime, autoconfiguration of addresses according to
any desired scheme (rfc4862, rfc7217, et cetera) is inherent in the setting
of the X bit.
          </t>
          <t>
Accordingly, the A bit MUST be interpreted as having been set if the host
wishes to apply standard address generation schemes that require the bit to
be set.
          </t>
          <t>
Crucially, the PIO-X receiving node is NOT required to perform Duplicate
Address Detection (DAD) on any address it configures, nor is it required
to configure the address on the link over which the PIO-X information was
received (i.e. it is under no obligation to form addresses in a way that
they meet the qualification of being on-link according to the definition
in rfc5942#section-4, item 1).
          </t>
        </section>
      </section>

      <section title="basics">
        <t>
When the host receives an RA-X the host knows that it is alone and in full
control of the prefix, the A (Autonomous) bit is implied to be set and the
host can choose any valid addresses it wants within the subnet.
        </t>
      </section>

      <section title="Comparison with non-X-bit aware hosts">
        <t>
Link-local address behaviour.  Changing your address might result in a
loss of connectivity.  Respond to Neighbor Solications for link-local
or risk connectivity troubles.
        </t>
      </section>

      <section title="Renewal">
        <t>
Because the router(s) may not necessarily have lower layer hints about the
disappearance of node that received a PIO with the X bit, hosts SHOULD
re-RS at 1/2, 3/4, and 7/8 of preferred lifetime.
        </t>
        <t>
Hosts compliant with this document SHOULD implement resilient-rs:
https://tools.ietf.org/html/rfc7559
        </t>
        <t>
Nodes SHOULD prefer sending traffic sourced from an exclusive prefix to the
set of routers from which it received that prefix. (cite baker draft)
Subject to default router lifetimes and RIO information, etc.
        </t>
      <t>
It is possible for a node to receive multiple PIOs from multiple routers
with a mix of exclusive and non-exclusive prefix information.
      </t>
<t>
The intent here is not to create sophisticated routing architectures can
would be better handled by an actual routing protocol. As such:
<list>
        <t>
A PIO-X receiving node SHOULD NOT generate ICMPv6 Redirects (reference) for any address
within its exclusive prefix. Redirecting portions of exclusive prefixes to other on-link
nodes is not a supported configuration.
        </t>
<t>
A PIO-X receiving node SHOULD NOT transmit RAs with any subset of its exclusive
prefixes via the same interface through which the exlucive prefix was learned.
</t>
</list>
</t>
      </section>
    </section>

    <section title="Router behaviour">
      <section title="foo">
        <t>
When the host starts using the network connection it sends out an RS
(Router Solicitation). This is one way of detecting that a new device. If
the router is configured to use RA-X, it can now prepare itself to send the
RA-X and then send it.
        </t>
        <t>
The RA-X packet MUST be sent using the unicast L2 address (if applicable)
and the L3 address of the host, learnt from the RS packet received from the
host.
        </t>
        <t>
(***HOW TO HANDLE WHEN FOR INSTANCE 802.1X OR WIFI-AP-ATTACHMENT IS USED TO DETECT A NEW HOST***)
        </t>
        <t>
          <list counter="reqs" hangIndent="4" style="format R%d">
            <t>
L2 signals for loss of host
            </t>
            <t>
Consider not reassigning a prefix immediately given that some hosts
might reappear, attempt DNAv6, and it may be desirable to re-PIO-X
them with the same prefix.
            </t>
          </list>
        </t>
      </section>

      <section title="Preparations before sending RA-X">
        <t>
When the router intends to send the RA-X, it MUST before sending the RA packet
install an IPv6 forwarding entry, assuring the prefix works as soon as the host
receives the RA-X and starts using it.
        </t>
      </section>

      <section title="Implementation considerations">
        <t>
Out of scope things that are with careful consideration include:
        </t>
        <t>
Routers SHOULD NOT announce the same prefix to two different nodes within
the valid lifetime of the earlier of the two PIO announcements.
        </t>
        <t>
A link may operate in a mode where routers announce RAs to all nodes,
possibly with non-exclusive PIO data, and non-zero default router lifetimes.
Separately, one or more other nodes on the link may announce exclusive PIO
information to nodes along with zero default router lifetimes.
"Host processing" rules require that the receiving node (or "host")
send exclusive PIO originated traffic destined off-link through routers with
non-zero default router lifetimes.
        </t>
        <t>
        </t>
      </section>

      <section title="Timers">
        <t>
Routers SHOULD NOT announce the same prefix to two different nodes within
the valid lifetime of the earlier of the two PIO announcements.
        </t>
        <t>
It is a configuration error for more than one router on a link to announce
PIO-X information for the same prefix with substantially different lifetimes.
        </t>
        <t>
The router MUST send new unicast RAs according to the times defined in RFC XXX
section XYZ. It detects that the host is still available either by wiki AP
attachment, link being up, or by verifying host availability by doing NUD.

Energy RFC reference, to balance out the number of transmissions required for
the host to maintain connectivity given a certain percentage of packet loss
with the resource impact on the host of receiving and processing an RA (e.g.
if the receiving host has energy conservation objectives).
        </t>
      </section>
    </section>

    <!-- Possibly a 'Contributors' section ... -->
    <section anchor="acks" title="Acknowledgements">
      <t>
      </t>
      <t>
      </t>
    </section>

    <section anchor="IANA" title="IANA Considerations">
      <t>
This memo contains no requests of IANA.
      </t>
    </section>

    <section anchor="Security" title="Security Considerations">
      <t>
This document fundamentally introduces no new protocol or behaviour
substantively different from existing behaviour on a link which guarantees
a unique /64 prefix to every attached host. It only describes a mechanism
to convey that topological reality, allowing the host to make certain
optimizations as well as share the exclusive prefix as it sees fit with
other nodes according to its capabilities and policies.
      </t>
    </section>
  </middle>


  <back>
    <!-- References split into informative and normative -->

    <!-- There are 2 ways to insert reference entries from the citation libraries:
     1. define an ENTITY at the top, and use "ampersand character"RFC2629; here (as shown)
     2. simply use a PI "less than character"?rfc include="reference.RFC.2119.xml"?> here
        (for I-Ds: include="reference.I-D.narten-iana-considerations-rfc2434bis.xml")

     Both are cited textually in the same manner: by using xref elements.
     If you use the PI option, xml2rfc will, by default, try to find included files in the same
     directory as the including file. You can also define the XML_LIBRARY environment variable
     with a value containing a set of directories to search.  These can be either in the local
     filing system or remote ones accessed by http (http://domain/dir/... ).-->

    <references title="Normative References">
      &RFC2119;
      &RFC4861;
      &RFC4862;
      &RFC7559;
    </references>

    <references title="Informative References">
      &RFC4191;
      &RFC7934;
    </references>

<!--
    <section anchor="android-comparison" title="Comparison with Android implementation">
      <t>This becomes an Appendix.</t>
    </section>
-->
  </back>
</rfc>
